import json
import pprint
import re

import cv2
from google import genai
from google.genai import types

from ok import Logger

logger = Logger.get_logger(__name__)

llvm_prompt = """
You are a precise Android app automation agent that interacts with app through structured commands.
Your role is to:
1. Analyze the response histories from earlier responses, empty histories means it's the begging
2. Analyze the provided xml dump from uiautomator and optional screenshot from the current state of the app
3. Plan a sequence of actions to accomplish the given task
4. Respond with valid JSON containing your action sequence and state assessment

1. RESPONSE FORMAT: You must ALWAYS respond with valid JSON in this exact format:
   {
    "state": "Success|Failed|Done - Done if the end goal is achieved, Error if then end goal can't be achieved or encountered an error, Success if you can successfully provide the actions",
    "error": "describe if there is a error",
    "memory": "Description of what has been done and what you need to remember until the end of the task",
    "goal": "What needs to be done with the next actions"
    "actions": [
       {
         "action": "click",
         "description": "click the login button",
         // action-specific parameters
       },
       // ... more actions in sequence
    ]
   }

2. ACTIONS: You can specify multiple actions to be executed in sequence.
   The supported actions are: "click", "input_text", "scroll"
   All the locations need to be calculated base on the xml uiautomator dump
   example of a login action sequence:
   [
       {"action": "click", "description": "click the username input", "x": 100, "y": 200},
       {"action": "input_text", "description": "input the text abc as username", "text": "abc"},
       {"action": "click", "description": "click password area",  "x": 100, "y": 300},
       {"action": "input_text", "description": "input text 123 as password ", "text": "123"}, // 
       {"action": "click", "click the login button", "x": 200, "y": 400}, // click the login button
   ]
   the scroll actions are in the format of, indicating the starting mouse point to the end mouse point:
   {"action": "scroll", description: "scroll down to the next list", "from_x": 100, "from_y": 400, "to_x": 100, "to_y": 300}
   the wait actions means the page is loading, and the user need to wait for the page to change, at least wait 2000 milliseconds, and wait more if the page does change from last time:
   {"action": "wait", description: "wait for the login to complete", "milliseconds": 2000}

3. NAVIGATION & ERROR HANDLING:
   - If stuck, try alternative approaches
   - Handle popups by accepting or closing them
   - Use scroll to find elements you are looking for

4. TASK COMPLETION:
   - set the evaluation_previous_goal to Done and return a empty actions as soon as the task is complete
   - Don't hallucinate actions

5. VISUAL CONTEXT:
   - When an image is provided, use it to understand the layout

6. ACTION SEQUENCING:
   - Actions are executed in the order they appear in the list
   - Each action should logically follow from the previous one
   - If the page changes after an action, the sequence is interrupted and you get the new state.
   - If content only disappears the sequence continues.
   - Only provide the action sequence until you think the page will change.
   - Try to be efficient, e.g. fill forms at once, or chain actions where nothing changes on the page like saving, extracting, checkboxes...
   - only use multiple actions if it makes sense.
   - use maximum 20 actions per sequence

Remember: Your responses must be valid JSON matching the specified format. Each action in the sequence must be valid.
"""


class GeminiApi:
    def __init__(self, api_key, base_url=None, model='gemini-2.0-flash', prompt=None):
        self.api_key = api_key
        self.model = model
        self.client = genai.Client(api_key=api_key)
        self.prompt = prompt  # Store the initial prompt
        self.chat = None

    def _encode_image(self, image):
        success, encoded_image = cv2.imencode('.png', image)
        if not success:
            raise ValueError("Image encoding failed")  # Convert encoded image to bytes
        jpg_bytes = encoded_image.tobytes()
        return jpg_bytes

    def converse(self, user_messages, image=None):
        """Sends a message to Gemini and returns the response."""

        contents = []
        for user_message in user_messages:
            contents.append(user_message)

        if image is not None:
            image_bytes = self._encode_image(image)
            contents.append(types.Part.from_bytes(
                data=image_bytes,
                mime_type='image/png'
            ))

        response = self.client.models.generate_content(
            model='gemini-2.0-flash', contents=contents,
            config=types.GenerateContentConfig(
                system_instruction=llvm_prompt,
                temperature=0,
            ),
        )
        logger.info('Message response: {}'.format(response.text))
        return parse_json_from_string(response.text), 0, 0

    def restart_conversation(self):
        """Clears the conversation history but keeps the prompt."""
        self.chat = None


def parse_json_from_string(json_string):
    """Parses JSON from a string, handling code blocks.

    Args:
        json_string: The JSON string, possibly wrapped in code blocks.

    Returns:
        A Python dictionary, or None if an error occurs.
    """
    # Remove code block markers (```json and ```) using regex
    json_string = re.sub(r"```json\n?", "", json_string)  # Remove ```json and optional newline
    json_string = re.sub(r"```", "", json_string)  # Remove ```

    json_string = json_string.strip()  # Remove leading/trailing whitespace

    try:
        data = json.loads(json_string)
        return data
    except json.JSONDecodeError as e:
        logger.error(f"Error decoding JSON", e)
        return None


xml = """
<?xml version='1.0' encoding='UTF-8' standalone='yes' ?><hierarchy rotation="0"><node index="0" text="" resource-id="" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,1920]"><node index="0" text="" resource-id="" class="android.widget.RelativeLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,1920]"><node index="0" text="" resource-id="" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,1920]"><node index="1" text="" resource-id="android:id/content" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,1920]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/ckj" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,1920]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/jqh" class="android.widget.RelativeLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,1920]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rlCommenTitle" class="android.widget.RelativeLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,42][1080,130]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/ie3" class="android.widget.RelativeLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,42][1080,130]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/i_z" class="android.widget.RelativeLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[7,42][1073,130]"><node index="0" text="移除" resource-id="com.tencent.mobileqq:id/ivTitleBtnRightText" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="false" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[961,68][1052,103]" /></node></node><node index="1" text="取消" resource-id="com.tencent.mobileqq:id/ivTitleBtnLeft" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[26,68][96,103]" /><node index="2" text="频道成员（8217人）" resource-id="com.tencent.mobileqq:id/ivTitleName" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[392,42][688,130]" /></node><node index="1" text="" resource-id="" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,130][1080,1920]"><node index="0" text="" resource-id="" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,130][1080,1920]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/xr7" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,130][1080,1920]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/ns2" class="android.widget.AbsListView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="true" long-clickable="false" password="false" selected="false" bounds="[0,130][1080,1920]"><node index="1" text="" resource-id="" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,130][1080,186]"><node index="0" text="频道主 (1人)" resource-id="com.tencent.mobileqq:id/ssd" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,146][1052,170]" /></node><node index="2" text="" resource-id="com.tencent.mobileqq:id/dq8" class="android.view.ViewGroup" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="false" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,186][1080,275]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/y27" class="android.widget.CheckBox" package="com.tencent.mobileqq" content-desc="" checkable="true" checked="false" clickable="false" enabled="false" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,213][63,248]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/a32" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,199][154,262]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rjr" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,199][154,262]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/rnk" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[133,241][154,262]" /></node><node index="2" text="先看常见问题处理" resource-id="com.tencent.mobileqq:id/rnb" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[172,214][396,247]" /><node index="3" text="" resource-id="com.tencent.mobileqq:id/jbb" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[396,210][663,252]"><node NAF="true" index="0" text="" resource-id="com.tencent.mobileqq:id/rnd" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[405,210][512,252]" /><node index="1" text="频道主" resource-id="com.tencent.mobileqq:id/rmk" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[519,218][581,243]" /><node NAF="true" index="2" text="" resource-id="com.tencent.mobileqq:id/rmm" class="android.view.View" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[590,219][663,242]" /></node></node><node index="3" text="" resource-id="" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,275][1080,331]"><node index="0" text="超级管理员 (1人)" resource-id="com.tencent.mobileqq:id/ssd" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,291][1052,315]" /></node><node index="4" text="" resource-id="com.tencent.mobileqq:id/dq8" class="android.view.ViewGroup" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,331][1080,420]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/y27" class="android.widget.CheckBox" package="com.tencent.mobileqq" content-desc="" checkable="true" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,358][63,393]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/a32" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,344][154,407]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rjr" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,344][154,407]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/rnk" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[133,386][154,407]" /></node><node index="2" text="频道用户" resource-id="com.tencent.mobileqq:id/rnb" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[172,359][284,392]" /><node index="3" text="" resource-id="com.tencent.mobileqq:id/jbb" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[284,363][435,388]"><node index="0" text="管理员" resource-id="com.tencent.mobileqq:id/rmk" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[291,363][353,388]" /><node NAF="true" index="1" text="" resource-id="com.tencent.mobileqq:id/rmm" class="android.view.View" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[362,364][435,387]" /></node></node><node index="5" text="" resource-id="" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,420][1080,476]"><node index="0" text="机器人" resource-id="com.tencent.mobileqq:id/ssd" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,436][1052,460]" /></node><node index="6" text="" resource-id="com.tencent.mobileqq:id/dq8" class="android.view.ViewGroup" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,476][1080,565]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/y27" class="android.widget.CheckBox" package="com.tencent.mobileqq" content-desc="" checkable="true" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,503][63,538]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/a32" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,489][154,552]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rjr" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,489][154,552]" /></node><node index="2" text="频道管理助手" resource-id="com.tencent.mobileqq:id/rnb" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[172,504][340,537]" /><node index="3" text="" resource-id="com.tencent.mobileqq:id/jbb" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[340,508][443,533]"><node index="0" text="小管家" resource-id="com.tencent.mobileqq:id/rmk" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[347,508][409,533]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/xod" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[418,508][443,533]" /></node></node><node index="7" text="" resource-id="" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,565][1080,621]"><node index="0" text="海啸级" resource-id="com.tencent.mobileqq:id/ssd" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,581][1052,605]" /></node><node index="8" text="" resource-id="com.tencent.mobileqq:id/dq8" class="android.view.ViewGroup" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,621][1080,710]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/y27" class="android.widget.CheckBox" package="com.tencent.mobileqq" content-desc="" checkable="true" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,648][63,683]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/a32" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,634][154,697]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rjr" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,634][154,697]" /></node><node index="2" text="Swevener" resource-id="com.tencent.mobileqq:id/rnb" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[172,649][293,682]" /><node index="3" text="" resource-id="com.tencent.mobileqq:id/jbb" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[293,654][366,677]"><node NAF="true" index="0" text="" resource-id="com.tencent.mobileqq:id/rmm" class="android.view.View" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[302,654][366,677]" /></node></node><node index="9" text="" resource-id="" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,710][1080,766]"><node index="0" text="普通成员" resource-id="com.tencent.mobileqq:id/ssd" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,726][1052,750]" /></node><node index="10" text="" resource-id="com.tencent.mobileqq:id/dq8" class="android.view.ViewGroup" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,766][1080,855]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/y27" class="android.widget.CheckBox" package="com.tencent.mobileqq" content-desc="" checkable="true" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,793][63,828]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/a32" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,779][154,842]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rjr" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,779][154,842]" /></node><node index="2" text="大方盒子" resource-id="com.tencent.mobileqq:id/rnb" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[172,794][284,827]" /><node index="3" text="" resource-id="com.tencent.mobileqq:id/jbb" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[284,799][357,822]"><node NAF="true" index="0" text="" resource-id="com.tencent.mobileqq:id/rmm" class="android.view.View" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[293,799][357,822]" /></node></node><node index="11" text="" resource-id="com.tencent.mobileqq:id/dq8" class="android.view.ViewGroup" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,855][1080,944]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/y27" class="android.widget.CheckBox" package="com.tencent.mobileqq" content-desc="" checkable="true" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,882][63,917]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/a32" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,868][154,931]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rjr" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,868][154,931]" /></node><node index="2" text="陈十一" resource-id="com.tencent.mobileqq:id/rnb" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[172,883][256,916]" /><node index="3" text="" resource-id="com.tencent.mobileqq:id/jbb" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[256,888][329,911]"><node NAF="true" index="0" text="" resource-id="com.tencent.mobileqq:id/rmm" class="android.view.View" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[265,888][329,911]" /></node></node><node index="12" text="" resource-id="com.tencent.mobileqq:id/dq8" class="android.view.ViewGroup" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,944][1080,1033]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/y27" class="android.widget.CheckBox" package="com.tencent.mobileqq" content-desc="" checkable="true" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,971][63,1006]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/a32" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,957][154,1020]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rjr" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,957][154,1020]" /></node><node index="2" text="太易子" resource-id="com.tencent.mobileqq:id/rnb" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[172,972][256,1005]" /><node index="3" text="" resource-id="com.tencent.mobileqq:id/jbb" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[256,977][329,1000]"><node NAF="true" index="0" text="" resource-id="com.tencent.mobileqq:id/rmm" class="android.view.View" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[265,977][329,1000]" /></node></node><node index="13" text="" resource-id="com.tencent.mobileqq:id/dq8" class="android.view.ViewGroup" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,1033][1080,1122]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/y27" class="android.widget.CheckBox" package="com.tencent.mobileqq" content-desc="" checkable="true" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,1060][63,1095]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/a32" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1046][154,1109]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rjr" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1046][154,1109]" /></node><node index="2" text="D.M.M" resource-id="com.tencent.mobileqq:id/rnb" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[172,1061][251,1094]" /><node index="3" text="" resource-id="com.tencent.mobileqq:id/jbb" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[251,1066][324,1089]"><node NAF="true" index="0" text="" resource-id="com.tencent.mobileqq:id/rmm" class="android.view.View" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[260,1066][324,1089]" /></node></node><node index="14" text="" resource-id="com.tencent.mobileqq:id/dq8" class="android.view.ViewGroup" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,1122][1080,1211]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/y27" class="android.widget.CheckBox" package="com.tencent.mobileqq" content-desc="" checkable="true" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,1149][63,1184]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/a32" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1135][154,1198]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rjr" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1135][154,1198]" /></node><node index="2" text="手握日月摘星辰" resource-id="com.tencent.mobileqq:id/rnb" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[172,1150][368,1183]" /><node index="3" text="" resource-id="com.tencent.mobileqq:id/jbb" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[368,1155][441,1178]"><node NAF="true" index="0" text="" resource-id="com.tencent.mobileqq:id/rmm" class="android.view.View" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[377,1155][441,1178]" /></node></node><node index="15" text="" resource-id="com.tencent.mobileqq:id/dq8" class="android.view.ViewGroup" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,1211][1080,1300]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/y27" class="android.widget.CheckBox" package="com.tencent.mobileqq" content-desc="" checkable="true" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,1238][63,1273]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/a32" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1224][154,1287]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rjr" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1224][154,1287]" /></node><node index="2" text="怜月" resource-id="com.tencent.mobileqq:id/rnb" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[172,1239][228,1272]" /><node index="3" text="" resource-id="com.tencent.mobileqq:id/jbb" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[228,1244][301,1267]"><node NAF="true" index="0" text="" resource-id="com.tencent.mobileqq:id/rmm" class="android.view.View" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[237,1244][301,1267]" /></node></node><node index="16" text="" resource-id="com.tencent.mobileqq:id/dq8" class="android.view.ViewGroup" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,1300][1080,1389]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/y27" class="android.widget.CheckBox" package="com.tencent.mobileqq" content-desc="" checkable="true" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,1327][63,1362]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/a32" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1313][154,1376]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rjr" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1313][154,1376]" /></node><node index="2" text="&#127809;" resource-id="com.tencent.mobileqq:id/rnb" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[172,1328][214,1361]" /><node index="3" text="" resource-id="com.tencent.mobileqq:id/jbb" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[214,1333][287,1356]"><node NAF="true" index="0" text="" resource-id="com.tencent.mobileqq:id/rmm" class="android.view.View" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[223,1333][287,1356]" /></node></node><node index="17" text="" resource-id="com.tencent.mobileqq:id/dq8" class="android.view.ViewGroup" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,1389][1080,1478]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/y27" class="android.widget.CheckBox" package="com.tencent.mobileqq" content-desc="" checkable="true" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,1416][63,1451]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/a32" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1402][154,1465]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rjr" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1402][154,1465]" /></node><node index="2" text="Ⅴ" resource-id="com.tencent.mobileqq:id/rnb" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[172,1417][214,1450]" /><node index="3" text="" resource-id="com.tencent.mobileqq:id/jbb" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[214,1422][287,1445]"><node NAF="true" index="0" text="" resource-id="com.tencent.mobileqq:id/rmm" class="android.view.View" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[223,1422][287,1445]" /></node></node><node index="18" text="" resource-id="com.tencent.mobileqq:id/dq8" class="android.view.ViewGroup" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,1478][1080,1567]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/y27" class="android.widget.CheckBox" package="com.tencent.mobileqq" content-desc="" checkable="true" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,1505][63,1540]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/a32" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1491][154,1554]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rjr" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1491][154,1554]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/rnk" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[133,1533][154,1554]" /></node><node index="2" text="阿秃" resource-id="com.tencent.mobileqq:id/rnb" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[172,1506][228,1539]" /><node index="3" text="" resource-id="com.tencent.mobileqq:id/jbb" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[228,1511][301,1534]"><node NAF="true" index="0" text="" resource-id="com.tencent.mobileqq:id/rmm" class="android.view.View" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[237,1511][301,1534]" /></node></node><node index="19" text="" resource-id="com.tencent.mobileqq:id/dq8" class="android.view.ViewGroup" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,1567][1080,1656]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/y27" class="android.widget.CheckBox" package="com.tencent.mobileqq" content-desc="" checkable="true" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,1594][63,1629]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/a32" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1580][154,1643]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rjr" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1580][154,1643]" /></node><node index="2" text="卯" resource-id="com.tencent.mobileqq:id/rnb" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[172,1595][214,1628]" /><node index="3" text="" resource-id="com.tencent.mobileqq:id/jbb" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[214,1600][287,1623]"><node NAF="true" index="0" text="" resource-id="com.tencent.mobileqq:id/rmm" class="android.view.View" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[223,1600][287,1623]" /></node></node><node index="20" text="" resource-id="com.tencent.mobileqq:id/dq8" class="android.view.ViewGroup" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,1656][1080,1745]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/y27" class="android.widget.CheckBox" package="com.tencent.mobileqq" content-desc="" checkable="true" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,1683][63,1718]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/a32" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1669][154,1732]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rjr" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1669][154,1732]" /></node><node index="2" text="情天久晴" resource-id="com.tencent.mobileqq:id/rnb" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[172,1684][284,1717]" /><node index="3" text="" resource-id="com.tencent.mobileqq:id/jbb" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[284,1689][357,1712]"><node NAF="true" index="0" text="" resource-id="com.tencent.mobileqq:id/rmm" class="android.view.View" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[293,1689][357,1712]" /></node></node><node index="21" text="" resource-id="com.tencent.mobileqq:id/dq8" class="android.view.ViewGroup" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,1745][1080,1834]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/y27" class="android.widget.CheckBox" package="com.tencent.mobileqq" content-desc="" checkable="true" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,1772][63,1807]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/a32" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1758][154,1821]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rjr" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1758][154,1821]" /></node><node index="2" text="谈秋睡不够" resource-id="com.tencent.mobileqq:id/rnb" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[172,1773][312,1806]" /><node index="3" text="" resource-id="com.tencent.mobileqq:id/jbb" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[312,1778][385,1801]"><node NAF="true" index="0" text="" resource-id="com.tencent.mobileqq:id/rmm" class="android.view.View" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[321,1778][385,1801]" /></node></node><node index="22" text="" resource-id="com.tencent.mobileqq:id/dq8" class="android.view.ViewGroup" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,1834][1080,1920]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/y27" class="android.widget.CheckBox" package="com.tencent.mobileqq" content-desc="" checkable="true" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,1861][63,1896]" /><node index="1" text="" resource-id="com.tencent.mobileqq:id/a32" class="android.widget.FrameLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1847][154,1910]"><node index="0" text="" resource-id="com.tencent.mobileqq:id/rjr" class="android.widget.ImageView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[91,1847][154,1910]" /></node><node index="2" text="l" resource-id="com.tencent.mobileqq:id/rnb" class="android.widget.TextView" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[172,1862][214,1895]" /><node index="3" text="" resource-id="com.tencent.mobileqq:id/jbb" class="android.widget.LinearLayout" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[214,1867][287,1890]"><node NAF="true" index="0" text="" resource-id="com.tencent.mobileqq:id/rmm" class="android.view.View" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[223,1867][287,1890]" /></node></node></node></node></node></node></node></node></node></node></node><node index="1" text="" resource-id="android:id/statusBarBackground" class="android.view.View" package="com.tencent.mobileqq" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,42]" /></node></hierarchy>
"""

# Example usage:
if __name__ == "__main__":
    api_key = "AIzaSyDAWDmuvH7WS1BXBu6dCePFRLJcpHQtZoM"
    if not api_key:
        raise ValueError("No GOOGLE_API_KEY environment variable set")

    gemini = GeminiApi(api_key)

    try:
        image_path = "tests/images/delete_from_channel.png"  # Replace with your image path
        image = cv2.imread(image_path)
        if image is not None:
            response = gemini.converse("我要从这个频道中批量选中本页面的所有普通用户, 并移除他们", ui_dump=xml,
                                       image=image)
            print(f"Gemini (with image1):")
            pprint.pprint(response)
        else:
            print(f"Could not read image from {image_path}")
    except FileNotFoundError:
        print("Image file not found. Skipping image example.")

    # try:
    #     image_path = "tests/images/delete_from_channel2.png"  # Replace with your image path
    #     image = cv2.imread(image_path)
    #     if image is not None:
    #         response = gemini.converse("This is what I got after the actions:", image=image)
    #         print(f"Gemini (with image2):")
    #         pprint.pprint(response)
    #     else:
    #         print(f"Could not read image from {image_path}")
    # except FileNotFoundError:
    #     print("Image file not found. Skipping image example.")
